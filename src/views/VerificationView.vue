<script setup lang="ts">

import { useRootStore } from '@/stores/root';
import { BackButton } from 'vue-tg'
import { useRouter } from 'vue-router';
import CloseIcon from '@/components/icons/CloseIcon.vue';
import VerificationIcon from '@/components/icons/VerificationIcon.vue'
import EmailVerificationForm from '@/components/verification/EmailVerificationForm.vue'
import ChannelSubscribeForm from '@/components/verification/ChannelSubscribeForm.vue'
import { computed } from 'vue'
import DoneIcon from '@/components/icons/DoneIcon.vue';

const root = useRootStore()
const router = useRouter()

const isVerified = computed(() => root.user?.is_channel_verified && root.user?.is_email_verified)

</script>

<template>
  <BackButton @click="router.go(-1)"/>
  <section v-if="root.user" class="page verification">
    <div class="verification__icon">
      <VerificationIcon v-if="isVerified" width="124" height="124"/>
      <svg v-else width="124" height="124" viewBox="0 0 124 124" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M13.564 54.5818C13.3735 54.1894 13.2532 53.7842 13.2032 53.366C13.0191 51.8669 12.4185 50.4452 12.2611 48.9606C12.2005 48.4036 11.859 47.9991 11.8518 47.4421C11.8421 46.6453 11.5369 45.9333 11.3868 45.1534C11.2156 44.2541 10.9888 43.3096 10.7062 42.3198C10.481 41.5255 10.5391 40.7916 10.2364 40.0651C9.94093 39.3579 10.0766 38.6386 9.77624 37.8926C9.52678 37.2751 9.62608 36.6405 9.38632 36.0181C9.35241 35.9309 9.42749 35.8413 9.51952 35.8607C10.1419 35.9915 10.4931 35.6742 11.0405 35.5047C12.6365 35.0179 14.2398 34.5747 15.7825 34.0782C19.0181 33.0319 22.6162 31.9074 26.5768 30.7045C26.9619 30.5883 27.4123 30.2952 27.514 29.8811C27.7934 28.725 27.975 27.6489 28.059 26.6527C28.088 26.2959 28.1712 25.9633 28.3084 25.6549C28.5191 25.1754 28.4658 24.6547 28.5676 24.1461C28.834 22.8367 29.0794 21.4869 29.3038 20.0967C29.4265 19.3298 29.5726 18.5976 29.7422 17.9001C29.8229 17.5642 29.8649 17.2042 29.8681 16.8199C29.8705 16.4155 29.9771 16.0788 30.1297 15.7131C30.2919 15.3135 30.3016 14.9187 30.2992 14.4925C30.2976 14.3553 30.3654 14.2858 30.5026 14.2842C35.876 14.2277 39.8317 14.2616 42.3698 14.3859C44.606 14.4957 46.9084 14.5224 49.277 14.4659C50.2627 14.4416 51.3986 13.6303 52.1881 12.9885C53.2876 12.0948 54.4937 11.4603 55.5206 10.5521C56.4506 9.72867 57.5041 9.12078 58.4632 8.3821C59.8663 7.30356 61.4219 6.14591 63.1301 4.90913C63.2779 4.80257 63.4692 4.7832 63.6339 4.85585C64.1183 5.06898 64.597 5.35476 65.0701 5.7132C66.0388 6.44783 67.0859 7.27854 68.2112 8.20531C70.093 9.75288 72.1419 11.2569 74.094 12.8287C75.2419 13.7522 76.5611 14.7444 78.0513 15.8052C78.3032 15.9844 78.5712 16.074 78.8554 16.074C83.8331 16.0837 89.3397 16.0837 95.375 16.074C95.488 16.074 95.6002 16.0691 95.7116 16.0594C96.175 16.0223 96.414 16.2855 96.4285 16.849C96.4414 17.3124 96.5326 17.7338 96.7022 18.1132C96.8443 18.4297 96.9177 18.7542 96.9226 19.0868C96.9371 19.8763 97.3246 20.5109 97.3609 21.281C97.3997 22.1287 97.792 22.8431 97.8211 23.6932C97.855 24.6668 98.2304 25.5726 98.3006 26.5728C98.3466 27.2412 98.6954 27.8007 98.7123 28.4788C98.7365 29.3386 99.1773 30.0312 99.1773 30.8862C99.1773 31.3286 99.296 31.8162 99.5333 32.349C99.7222 32.7728 99.8482 32.9351 100.291 33.1458C101.139 33.5462 102.003 33.9515 102.883 34.3616C103.115 34.4697 103.346 34.5779 103.575 34.6861C105.121 35.411 106.617 36.1231 108.066 36.8222C109.526 37.5269 111.088 38.1276 112.546 38.8929C113.432 39.3595 114.316 39.7599 115.198 40.0941C115.508 40.212 115.612 40.4292 115.51 40.7456C115.338 41.2881 115.401 41.8355 115.213 42.3828C115.027 42.9237 114.932 43.4533 114.927 43.9716C114.917 44.9476 114.486 45.8001 114.469 46.793C114.457 47.5026 114.094 48.0815 113.992 48.8032C113.876 49.6484 113.641 50.4234 113.561 51.3001C113.469 52.3198 113.04 53.2788 113.108 54.3396C113.118 54.4768 113.089 54.606 113.021 54.7271C112.72 55.2664 112.607 55.8678 112.682 56.5314C112.694 56.6452 112.677 56.7591 112.638 56.8656L112.229 57.9603C112.198 58.0426 112.206 58.121 112.253 58.1952C113.185 59.6645 114.04 61.2298 114.818 62.8912C115.062 63.4144 115.554 64.0319 115.813 64.6883C116.041 65.2631 116.309 65.8048 116.617 66.3133C117.245 67.3475 117.7 68.4373 118.288 69.4521C119.054 70.7648 119.565 72.1501 120.41 73.3901C120.466 73.4724 120.461 73.579 120.395 73.6541C119.645 74.5243 118.924 75.2533 118.235 75.841C117.395 76.5546 116.651 77.2368 116.002 77.8875C114.89 78.9991 113.755 80.2851 112.505 81.2854C111.994 81.6971 111.655 82.1839 111.163 82.615C110.094 83.5563 108.933 84.6817 107.681 85.9911C107.451 86.2317 107.291 86.5255 107.201 86.8727C107.09 87.307 107.107 87.6872 107.252 88.0134C107.288 88.0981 107.288 88.195 107.249 88.2798C107.01 88.7859 107.276 89.2412 107.276 89.7644C107.284 93.7185 107.289 97.7202 107.291 101.77C107.291 102.416 107.538 102.966 107.521 103.62C107.519 103.71 107.475 103.771 107.39 103.802C107.194 103.874 106.988 103.806 106.794 103.852C106.051 104.034 105.314 104.281 104.544 104.308C104.037 104.325 103.527 104.414 103.014 104.574C102.396 104.768 101.795 104.7 101.185 104.86C100.57 105.02 99.9329 105.129 99.2742 105.187C98.3272 105.272 97.5208 105.536 96.6029 105.671C95.731 105.8 94.9342 106.056 94.0429 106.112C93.5957 106.139 93.1509 106.197 92.7085 106.284C91.1666 106.589 89.6561 106.84 88.1772 107.037C87.5604 107.118 87.0445 107.442 86.6296 108.011C85.0457 110.181 83.4303 112.314 81.7834 114.409C80.5458 115.984 79.5117 117.582 78.2862 119.125C78.1966 119.239 78.0392 119.272 77.9108 119.21C76.0589 118.286 74.2102 117.4 72.3647 116.55C69.9074 115.42 67.1472 114.1 64.0844 112.591C63.2658 112.189 62.234 111.624 61.3162 112.126C60.4709 112.588 59.5264 112.84 58.6351 113.218C55.5077 114.54 52.335 115.832 49.1172 117.093C48.5166 117.329 47.7076 117.701 46.6905 118.212C46.2626 118.426 45.8807 118.307 45.5449 117.853C45.1994 117.388 44.8579 116.936 44.5205 116.497C42.2294 113.515 39.9859 110.653 37.7901 107.911C36.8334 106.717 35.9567 105.376 34.8741 104.245C34.0919 103.426 32.8422 103.729 31.8589 103.552C31.4892 103.486 31.1154 103.441 30.7376 103.419C26.5962 103.177 22.9682 102.887 19.8537 102.549C19.1739 102.477 18.5103 102.461 17.8629 102.501C17.7878 102.506 17.7248 102.45 17.7224 102.375C17.4802 96.2719 17.1605 90.2269 17.2526 84.0754C17.2768 82.305 17.0564 81.0141 15.6905 79.917C14.9623 79.3309 14.1962 78.6851 13.3921 77.9795C11.0396 75.9161 8.66863 73.8534 6.27905 71.7916C6.04817 71.5914 5.81647 71.3807 5.58397 71.1595C5.06085 70.6558 4.45296 70.2465 3.93468 69.7427C3.86848 69.6781 3.86121 69.6071 3.91288 69.5296C5.4984 67.111 7.03629 64.794 8.52655 62.5788C10.234 60.0359 11.9874 57.5413 13.5519 54.8918C13.6117 54.7917 13.6157 54.6883 13.564 54.5818Z" fill="url(#paint0_linear_1247_29690)"/>
        <path d="M55 72.1089C55.1372 71.991 55.2729 71.857 55.4069 71.7069C62.4013 63.8261 69.4255 55.9179 76.4796 47.9822C76.6039 47.8417 76.7339 47.7101 76.8695 47.5874C77.1037 47.3727 77.3386 47.3719 77.5743 47.585L83.7089 53.1093C83.9342 53.3127 83.9559 53.6591 83.7598 53.8916L56.8164 85.5794C56.6178 85.8119 56.2715 85.8433 56.0341 85.652L37.4777 70.5855C37.1823 70.345 37.1516 70.0745 37.3857 69.7742L42.336 63.4313C42.5177 63.2012 42.8495 63.1576 43.0844 63.332L54.8595 72.1137C54.9007 72.1452 54.9613 72.1452 55 72.1089Z" fill="white"/>
        <defs>
          <linearGradient id="paint0_linear_1247_29690" x1="17" y1="100" x2="135" y2="27" gradientUnits="userSpaceOnUse">
            <stop stop-color="#AEAEAE"/>
            <stop offset="0.493731" stop-color="#878787"/>
            <stop offset="1" stop-color="#5E5E5E"/>
          </linearGradient>
        </defs>
      </svg>
    </div>
    <div class="verification__title">
      Verification 1 Level
    </div>
    <div class="verification__text">
      You will take referral dust from your frens and swap dust possibility
    </div>
    <div class="verification__text mb-8">
      <DoneIcon v-if="root.user?.is_channel_verified" height="20px" />
      <CloseIcon v-else/>
      Subscribe to AVACOIN community
    </div>
    <div class="verification__text">
      <DoneIcon v-if="root.user?.is_email_verified" height="20px" />
      <CloseIcon v-else/>
      E-mail verification
    </div>

    <ChannelSubscribeForm />

    <EmailVerificationForm />
  </section>
</template>

<style lang="scss" scoped>
.verification {
  padding-bottom: 30px;
  background-image: url("@/assets/images/profile/profile-bg.png");
  background-size: 100%;
  background-repeat: no-repeat;
  background-position: center -100px;
  text-align: center;

  &__title {
    font-size: 32px;
    font-weight: 500;
    margin-bottom: 12px;
  }

  &__text {
    font-size: 16px;
    font-weight: 400;
    margin-bottom: 12px;
    color: #E9E9E9;
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: center;
  }
}
.mb-8 {
  margin-bottom: 8px;
}
</style>